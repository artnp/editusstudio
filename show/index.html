<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full-Screen YouTube Video Background</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Roboto', sans-serif;
      background-color: #121212;
      color: #ffffff;
    }

    #player {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .overlay-text {
      position: fixed;
      z-index: 1;
      text-align: center;
      color: #ffffff;
      font-size: 40px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    #first {
      top: 2%;
      left: 50%;
      transform: translateX(-50%);
    }

    #second {
      top: 50%;
      left: 10%;
      transform: translateY(-50%);
    }

    #third {
      top: 50%;
      right: 10%;
      transform: translateY(-50%);
    }

    .timeCode {
      position: fixed;
      z-index: 1; 
      bottom: 5%;
      left: 50%;
      transform: translateX(-50%);
      text-align: left;
      font-size: 24px; 
      background-color: rgba(0, 0, 0, 0.7); 
      border-radius: 10px;
      padding: 10px 10px;
      border: 2px solid #f1c40f; 
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .overlay-text:hover {
      transform: scale(1.1);
      opacity: 0.8;
    }
  </style>
</head>
<body>

<div id="player"></div>
<div id="first" class="overlay-text"></div>
<div id="second" class="overlay-text"></div>
<div id="third" class="overlay-text"></div>
<div class="timeCode"><img src="https://cdn-icons-png.flaticon.com/128/3855/3855783.png" height="24px"> : <span id="masterOfTime"></span></div>

<script>
function updateTimeCode() {
  const now = new Date();
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();
  const hours = now.getHours();
  const minutes = now.getMinutes();
  const seconds = now.getSeconds();

  const dateTimeString = `${year}.${month}${day}${hours}${minutes}${seconds}`;
  const dateTimeNumber = Number(dateTimeString);

  const timeCode = Number((((((dateTimeNumber + 3113) - 5125) * ((dateTimeNumber + 3113) / 5125) * 0.618) + (dateTimeNumber + 3113)) - 3113)).toFixed(9);

  document.getElementById("masterOfTime").innerText = timeCode;
}

// Update every second (1000 milliseconds)
setInterval(updateTimeCode, 1000);

// Initial call to display the time code immediately on load
updateTimeCode();

</script>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
  var player;
  var currentIndex = 0;
  var videoIds;
  var playerReady = false;
  var errorCount = 0;
  var maxErrors = 5;
  var blackScreenTimeout;

  // Array of text to display for each clip
  var texts = ['E', 'D', 'I', 'T', 'U', 'S'];

  function onYouTubeIframeAPIReady() {
    // Parse the URL parameter into video IDs array
    var urlParams = decodeURIComponent(window.location.href.split('index.html?')[1]);
    videoIds = urlParams.split(',');

    loadNextVideo();
    checkPlayerReady();
  }

  function loadNextVideo() {
    if (currentIndex < videoIds.length) {
      player = new YT.Player('player', {
        videoId: videoIds[currentIndex],
        playerVars: {
          'autoplay': 1, // Autoplay video
          'controls': 0,
          'fs': 1, // Allow fullscreen
          'loop': 0, // Disable looping
          'rel': 0, // Disable related videos
          'showinfo': 0, // Disable video title
          'modestbranding': 1, // Disable YouTube logo
          'iv_load_policy': 3, // Disable video annotations
          'disablekb': 1,
          'playlist': videoIds.join(',') // Play all videos in sequence
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange,
          'onError': onPlayerError
        }
      });
    }
  }

  function onPlayerReady(event) {
    playerReady = true;
    errorCount = 0; // Reset error count on successful load
    event.target.setVolume(100); // Set volume to 100%
    event.target.playVideo(); // Start playing the video

    // Check for black screen
    blackScreenTimeout = setTimeout(checkForBlackScreen, 5000); // Check after 5 seconds
  }

  function onPlayerStateChange(event) {
    clearTimeout(blackScreenTimeout); // Clear the timeout if state changes

    if (event.data === YT.PlayerState.PLAYING) {
      // Update the text based on the current index
      updateText();
    }

    if (event.data === YT.PlayerState.ENDED) {
      currentIndex++;
      if (currentIndex < videoIds.length) {
        loadNextVideo(); // Load next video if available
      } else {
        // End of playlist, stop playback
        document.getElementById("player").style.display = "none";
        document.getElementById("first").style.display = "none";
        document.getElementById("second").style.display = "none";
        document.getElementById("third").style.display = "none";
        document.querySelector('.timeCode').style.display = 'none';
        player.stopVideo();
      }
    }
  }

  function onPlayerError(event) {
    errorCount++;
    if (errorCount > maxErrors) {
      location.reload(); // Refresh page after exceeding max errors
    } else {
      // Attempt to reload the player after a delay if there's an error
      setTimeout(function() {
        player.destroy();
        currentIndex++; // Move to the next video in case the current one is causing the error
        if (currentIndex < videoIds.length) {
          loadNextVideo();
        } else {
          location.reload();
        }
      }, 5000); // Retry after 5 seconds
    }
  }

  function checkForBlackScreen() {
    if (player.getPlayerState() !== YT.PlayerState.PLAYING) {
      errorCount++;
      if (errorCount > maxErrors) {
        location.reload(); // Refresh page if too many errors
      } else {
        player.destroy();
        loadNextVideo(); // Reload the video
      }
    }
  }

  function checkPlayerReady() {
    setTimeout(function() {
      if (!playerReady) {
        location.reload();
      }
    }, 10000); // Check player readiness after 10 seconds
  }

  function updateText() {
    document.getElementById('first').innerText = texts[currentIndex];
    document.getElementById('second').innerText = texts[currentIndex];
    document.getElementById('third').innerText = texts[currentIndex];
  }

  // Listen for resize events to adjust player dimensions
  window.addEventListener('resize', function() {
    if (player) {
      player.setSize(window.innerWidth, window.innerHeight);
    }
  });
</script>


</body>
</html>