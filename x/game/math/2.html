<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math Game</title>
  <link rel="stylesheet" href="style.css">
</head>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>
<body>
  <div class="container">
    <div id="tea"><button onclick="teach()">üßô‡∏™‡∏≠‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢!</button><hr></div><br>
    <h1><div style="border: 5px dotted black; background-color: white;" id="question"></div></h1>
    <input type="number" id="answer" placeholder="‡∏ï‡∏≠‡∏ö‡∏Å‡∏î [Enter]" onkeyup="checkAutoSubmit(event)">
    <h1><font color="white"><div id="result"></div></font></h1>
    <canvas id="theCanvas"></canvas><div id="img"><img src="pencil.png" width="5%"></div>
  </div>

  <script>
    
    function teach(){
    Swal.fire({
      html: '<iframe width="560" height="315" src="https://www.youtube.com/embed/'+'FAHT7L4J6iM'+'?start=4&end=59" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>',
      showConfirmButton: false,
      showCloseButton: true,
      allowOutsideClick: true,
      background: 'black',
      width: '100%',
      height: '100%',
    });
  };

    let questionCount = 0;
    let correctCount = 0;
    let wrongCount = 0;

    const multipliers = [15,25,35,45,55,65,75,85,95];
///////////////////////////////////////////////////////////////////////////‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏™‡∏≠‡∏á
    function generateRandomMultiplier() {

      const randomIndex = Math.floor(Math.random() * multipliers.length);
      return multipliers[randomIndex];
    }
///////////////////////////////////////////////////////////////////////////‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏£‡∏Å
    function generateQuestion() {
      const randomNumber = Math.floor(Math.random() * multipliers.length);

      return `${multipliers[randomNumber]} * ${multipliers[randomNumber]}`;
    }
///////////////////////////////////////////////////////////////////////////
    function checkAutoSubmit(event) {
      if (event.key === 'Enter') {
        checkAnswer();
      }
    }

    function checkAnswer() {
      const questionElement = document.getElementById('question');
      const answerElement = document.getElementById('answer');
      const resultElement = document.getElementById('result');
      clearCanvas(theContext)
      const question = questionElement.innerText
      const [randomNumber, multiplier] = question.split('*').map(str => parseInt(str));
      const correctAnswer = randomNumber * multiplier;
      const userAnswer = parseInt(answerElement.value);
      if (userAnswer === correctAnswer) {
        resultElement.innerText = '‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
        resultElement.style.backgroundColor = 'green';
        document.body.style.backgroundColor = "#5EDC16";

        correctCount++;
      } else {
        resultElement.innerText = `‡∏ú‡∏¥‡∏î`;
        resultElement.style.backgroundColor = 'red';
        document.body.style.backgroundColor = '#DF080F';
        wrongCount++;
      }
      questionCount++;
      if (questionCount < 11) {
        setTimeout(() => {
          const nextQuestion = generateQuestion();
          questionElement.innerText = nextQuestion;
          answerElement.value = '';
          resultElement.innerText = '';
          resultElement.style.backgroundColor = '';
        }, 1000); // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
      } else {
        showResults();
      }
    }

    function showResults() {
      const resultElement = document.getElementById('result');
      resultElement.innerHTML = `
        <p>‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! <u>${correctCount}</u>/${questionCount}</p>
        <p>‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å: ${correctCount}</p>
        <p>‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î: <font color="red">${wrongCount}</font></p>
      `;
      document.getElementById("question").style.display = "none";
      document.getElementById("answer").style.display = "none";
      document.getElementById("theCanvas").style.display = "none";
      document.getElementById("tea").style.display = "none";
      document.getElementById("img").style.display = "none";
    }
    document.addEventListener('DOMContentLoaded', () => {
      const questionElement = document.getElementById('question');
      const answerElement = document.getElementById('answer');
      questionElement.innerText = generateQuestion();
const nextQuestion = generateQuestion();

///////////////////////////////////////////////////////////////////////////‡πÅ‡∏Å‡πâ‡∏™‡∏µ

const modifiedQuestion = nextQuestion.replace(/\*/g, '<span style="color: black;">*</span>');
const questionText = `<span style="color: red;">${modifiedQuestion}</span>`;

///////////////////////////////////////////////////////////////////////////

questionElement.innerHTML = questionText;
answerElement.value = '';
    });

  //////////‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏î
  const MAIN_MOUSE_BUTTON = 0;
function prepareContext(canvasElement) {
  let dpr = window.devicePixelRatio || 1;
  let rect = canvasElement.getBoundingClientRect();
  canvasElement.width = rect.width * dpr;
  canvasElement.height = rect.height * dpr;
  let context = canvasElement.getContext("2d");
  context.scale(dpr, dpr);
  return context;
}

function setLineProperties(context) {
  context.lineWidth = 4;
  context.lineJoin = "round";
  context.lineCap = "round";
  return context;
}
let theCanvas = document.getElementById("theCanvas");
let theContext = prepareContext(theCanvas);
let shouldDraw = false;
theCanvas.addEventListener("mousedown", start);
theCanvas.addEventListener("mouseup", end);
theCanvas.addEventListener("mousemove", move, false);
function clearCanvas(context) {
  context.clearRect(0, 0, context.canvas.width, context.canvas.height);  
}

function start(event) {
  if (event.button === MAIN_MOUSE_BUTTON) {
    shouldDraw = true;
    setLineProperties(theContext);
    theContext.beginPath();
    let elementRect = event.target.getBoundingClientRect();
    theContext.moveTo(event.clientX - elementRect.left, event.clientY - elementRect.top);
  }
}
function end(event) {
  if (event.button === MAIN_MOUSE_BUTTON) {
    shouldDraw = false;
  }
}
function move(event) {
  if (shouldDraw) {
    let elementRect = event.target.getBoundingClientRect();
    theContext.lineTo(event.clientX - elementRect.left, event.clientY - elementRect.top);
    theContext.stroke()
  }
}
  </script>
</body>
</html>
